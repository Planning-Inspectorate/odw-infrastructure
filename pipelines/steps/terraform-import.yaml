steps:
  - script: |
      set -euo pipefail

      echo "Starting Terraform Import for Existing Containers..."
      echo "----------------------------------------------------"
      echo "Subscription  : ff442a29-fc06-4a13-8e3e-65fd5da513b3"
      echo "Resource Group: pins-rg-data-odw-dev-uks"
      echo "Storage Acct  : pinsstodwdevuks9h80mb"
      echo "----------------------------------------------------"
      echo ""

      containers=(
        "insights-logs-builtinsqlreqsended"
        "logging"
        "odw-config-db"
        "odw-curated-migration"
        "odw-standardised-delta"
        "s51-advice-backup"
        "saphrsdata-to-odw"
        "synapse"
      )

      for container in "${containers[@]}"; do
        echo "Importing container: $container"

        terraform import \
          "module.synapse_data_lake.azurerm_storage_container.synapse[\"$container\"]" \
          "/subscriptions/ff442a29-fc06-4a13-8e3e-65fd5da513b3/resourceGroups/pins-rg-data-odw-dev-uks/providers/Microsoft.Storage/storageAccounts/pinsstodwdevuks9h80mb/blobServices/default/containers/$container"

        echo "Imported: $container"
        echo "------------------------------------------------------"
      done

      echo "All containers imported successfully."
    displayName: 'Terraform Import Existing Containers'
    workingDirectory: ${{ parameters.workingDirectory }}
